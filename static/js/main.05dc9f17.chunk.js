(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,function(e,t,n){"use strict";n.d(t,"d",function(){return U}),n.d(t,"f",function(){return _}),n.d(t,"h",function(){return h}),n.d(t,"j",function(){return k}),n.d(t,"c",function(){return j}),n.d(t,"g",function(){return w}),n.d(t,"i",function(){return T}),n.d(t,"b",function(){return y}),n.d(t,"a",function(){return v}),n.d(t,"k",function(){return S});var r=n(10),a=n(21),o=n.n(a),i=n(27);n.d(t,"e",function(){return i.eventCodes});var c=!r.jsPsych.turk.turkInfo().outsideTurk,s="true"===Object({NODE_ENV:"production",PUBLIC_URL:".",REACT_APP_USE_PHOTODIODE:"true",REACT_APP_USE_EEG:"true",REACT_APP_VOLUME:"true"}).REACT_APP_VIDEO,u="true"===Object({NODE_ENV:"production",PUBLIC_URL:".",REACT_APP_USE_PHOTODIODE:"true",REACT_APP_USE_EEG:"true",REACT_APP_VOLUME:"true"}).REACT_APP_FIREBASE,d=!0;try{window.require("electron")}catch(A){d=!1}var p="true"===Object({NODE_ENV:"production",PUBLIC_URL:".",REACT_APP_USE_PHOTODIODE:"true",REACT_APP_USE_EEG:"true",REACT_APP_VOLUME:"true"}).REACT_APP_HIDE_FRAME_ELECTRON&&d,l=d,f=d,_={width:600,height:600},h=10,m=function(e){return e.keys().map(e)},v={frequency:100*(i.eventCodes.open_provoc_task-9),type:"sine"},g=m(n(48)),E=m(n(52)),b=m(n(57)),O=m(n(59)),y=o.a.filter(O,function(e){return e.includes("breathing_exercise")})[0];console.log(y);var k={min:0,max:10,canvasSize:640,circleRadius:28,cursorRadius:7.5},w=n(61);if(c){var P=n(62);o.a.merge(w,P)}var j={num_repeats:2,images:{neutral:g,provoking:E},repeats_per_condition:3,is_practice:!1},T={images:{neutral:b,provoking:[]},repeats_per_condition:1,is_practice:!0},S="Provocation",U={USE_MTURK:c,USE_VIDEO:s,USE_ELECTRON:d,USE_FIREBASE:u,USE_EEG:l,HIDE_FRAME_ELECTRON:p,USE_PHOTODIODE:f,USE_VOLUME:!0}},,,,,,function(e,t,n){"use strict";n.d(t,"b",function(){return s}),n.d(t,"a",function(){return u});var r=n(2),a=n(11),o=n.n(a),i=!1;if(r.d.USE_ELECTRON){var c=window.require("electron");i=c.ipcRenderer}var s=function(){var e=r.d.USE_PHOTODIODE?"visible":"invisible";return'<div class="photodiode-box '.concat(e,'" id="photodiode-box">\n\t\t\t\t\t\t\t\t\t<span id="photodiode-spot" class="photodiode-spot"></span>\n  \t\t\t\t\t\t\t\t</div>')},u=function(e){if(r.d.USE_PHOTODIODE){var t=e;e<r.e.open_provoc_task&&(t=1),function e(t,n){n>0&&function(e,t){o()(".photodiode-spot").css({"background-color":"white"}),setTimeout(function(){o()(".photodiode-spot").css({"background-color":"black"}),t()},e)}(t,function(){setTimeout(function(){e(t,n-1)},t)})}(40,t),i&&(i.send("trigger",e),setTimeout(function(){i.send("trigger",0)},5))}}},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return"<div class=".concat(t?"main-prompt":"task-container",">").concat(e,"</div>")}},,,,,,,,,,,,,,,,,,function(e,t){e.exports={eventCodes:{open_provoc_task:13,fixation:1,evidence:5,show_ratings:7,rate:2,start_break:8,test_connect:32}}},,,,,,,function(e,t,n){"use strict";(function(e){var r=n(12),a=n.n(r),o=n(16),i=n(2),c=n(8),s=n(9),u=n(10),d=!1;if(i.d.USE_ELECTRON){var p=window.require("electron");d=p.ipcRenderer}t.a=function(){document.title=i.k;var t='\n  <div class="d-flex flex-column align-items-center">\n  <p>'.concat(i.g.instructions.camera,'</p>\n  <video id="camera" width="640" height="480" autoplay></video>\n  </div>\n  ');return{type:"html_button_response",stimulus:Object(s.a)(t,!1)+Object(c.b)(),choices:[i.g.prompt.continue.button],response_ends_trial:!0,on_load:function(){var t=u.jsPsych.data.get().values()[0].participant_id,n=document.getElementById("camera"),r=function(r,a){console.log(r),"cameraCapture"===a&&(n.srcObject=r);var o=[];window[a]=new MediaRecorder(r,{mimeType:"video/webm"}),window[a].addEventListener("dataavailable",function(e){e.data.size>0&&o.push(e.data)}),window[a].addEventListener("stop",function(){!function(t,n,r){var a=new FileReader,o="pid_".concat(r,"_").concat(n,"_").concat(Date.now(),".webm");a.onload=function(){if(2===a.readyState){var t=new e(a.result);d.send("save_video",o,t)}},a.readAsArrayBuffer(t)}(new Blob(o),a,t)})};navigator.mediaDevices.getUserMedia({video:!0}).then(function(e){return r(e,"cameraCapture")}),window.require("electron").desktopCapturer.getSources({types:["window"]}).then(function(){var e=Object(o.a)(a.a.mark(function e(t){var n,o,c,s,u,d;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(n=!0,o=!1,c=void 0,e.prev=3,s=t[Symbol.iterator]();!(n=(u=s.next()).done);n=!0)(d=u.value).name===i.k&&navigator.mediaDevices.getUserMedia({video:{mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:d.id}}}).then(function(e){r(e,"screenCapture")}).catch(function(e){return console.log(e)});e.next=11;break;case 7:e.prev=7,e.t0=e.catch(3),o=!0,c=e.t0;case 11:e.prev=11,e.prev=12,n||null==s.return||s.return();case 14:if(e.prev=14,!o){e.next=17;break}throw c;case 17:return e.finish(14);case 18:return e.finish(11);case 19:case"end":return e.stop()}},e,null,[[3,7,11,19],[12,,14,18]])}));return function(t){return e.apply(this,arguments)}}())},on_finish:function(){i.d.USE_ELECTRON&&(window.cameraCapture.start(),window.screenCapture.start())}}}}).call(this,n(63).Buffer)},function(e){e.exports={a:"2.0.1"}},,function(e,t,n){e.exports=n(70)},,,,,function(e,t,n){},,function(e,t,n){},,,,function(e,t,n){var r={"./1_happy.jpg":49,"./2_happy.jpg":50,"./3_happy.jpg":51};function a(e){var t=o(e);return n(t)}function o(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}a.keys=function(){return Object.keys(r)},a.resolve=o,e.exports=a,a.id=48},function(e,t,n){e.exports=n.p+"static/media/1_happy.18aba42e.jpg"},function(e,t,n){e.exports=n.p+"static/media/2_happy.9545f071.jpg"},function(e,t,n){e.exports=n.p+"static/media/3_happy.c893ae7f.jpg"},function(e,t,n){var r={"./4_sad.jpeg":53,"./5_sad.jpeg":54,"./6_sad.jpeg":55,"./7_unknown.jpeg":56};function a(e){var t=o(e);return n(t)}function o(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}a.keys=function(){return Object.keys(r)},a.resolve=o,e.exports=a,a.id=52},function(e,t,n){e.exports=n.p+"static/media/4_sad.104fb27c.jpeg"},function(e,t,n){e.exports=n.p+"static/media/5_sad.ef6dac84.jpeg"},function(e,t,n){e.exports=n.p+"static/media/6_sad.bb879b1e.jpeg"},function(e,t,n){e.exports=n.p+"static/media/7_unknown.c348d28c.jpeg"},function(e,t,n){var r={"./istockphoto-888845986-612x612.jpg":58};function a(e){var t=o(e);return n(t)}function o(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}a.keys=function(){return Object.keys(r)},a.resolve=o,e.exports=a,a.id=57},function(e,t,n){e.exports=n.p+"static/media/istockphoto-888845986-612x612.23164b56.jpg"},function(e,t,n){var r={"./breathing_exercise.m4a":60};function a(e){var t=o(e);return n(t)}function o(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}a.keys=function(){return Object.keys(r)},a.resolve=o,e.exports=a,a.id=59},function(e,t,n){e.exports=n.p+"static/media/breathing_exercise.b4b71d9b.m4a"},function(e){e.exports={task:{name:"Provocation Task",end:"This experiment has ended."},prompt:{skip:"Skip breathing exercise",continue:{press:"Press any key to continue.",button:"Continue"},focus:"Make sure the photodiode is aligned and the EEG recording has begun before continuing.",setting_up:"Setting up task, please wait..."},eventMarker:{found:"Hold the USB event marker in front of the camera.",not_found:"Note: no USB event marker found."},instructions:{welcome:"Welcome!",p1:"During the task, you will see a series of neutral images and anxiety-provoking images.",p2:"You will be asked to rate your level of distress from 0-10 in response to each image, where 0 is no distress and 10 is the highest level of distress.",fixation:"Throughout the experiment, you'll see this fixation point at the center of the screen. <br> Try to keep your eyes focused on the fixation point during the task.",rate:"Next, you will do one practice trial. You will see the fixation point, followed by an image. Then, you will be asked to submit your rating when you\u2019re ready.",rate_practice:"Try submitting a rating of \u201c5\u201d by dragging the cursor to \u201c5\u201d and clicking to submit.",no_talking:"Try not to talk or move around more than necessary, as movements affect the quality of the recordings.",instruction_end:"In a few moments, the task will begin.",block_end:"Block 1 of 2 is now complete.",block_break:"Take a 10 second break and continue to block 2 of 2.",adjust_volume:"Set tablet volume to 50/100.",camera:"Make sure the camera is pointing to you and your face is within the camera area.",breathing:"Halfway through the task, you will be guided through a 3 minute guided deep breathing exercise."},block:{end_p1:"Block ",end_p2:" of ",end_p3:" is now complete.",break_p1:"You will now do a 3 minute guided breathing exercise before continuing to block ",break_p2:" of ",break_p3:"."},countdown:{message:"Provocation will begin in:"}}},function(e){e.exports={}},,,,,,,,function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),o=n(33),i=n.n(o),c=(n(42),n(12)),s=n.n(c),u=n(16),d=n(17),p=n(10),l=(n(44),n(45),n(46),function(e){return new Promise(function(t){return setTimeout(t,e)})}),f=function(e){return function(e,t){return e+Math.floor(Math.random()*Math.floor(t))}(e,50)},h=function(e){return JSON.parse(JSON.stringify(e))},m=function(e){for(var t,n,r=e.length;0!==r;)n=Math.floor(Math.random()*r),t=e[r-=1],e[r]=e[n],e[n]=t;return e},v=function(){var e=p.jsPsych.turk.turkInfo();return"".concat(e.workerId,":").concat(e.assignmentId)},g=n(22),E=(n(72),n(71),{apiKey:Object({NODE_ENV:"production",PUBLIC_URL:".",REACT_APP_USE_PHOTODIODE:"true",REACT_APP_USE_EEG:"true",REACT_APP_VOLUME:"true"}).REACT_APP_apiKey,authDomain:Object({NODE_ENV:"production",PUBLIC_URL:".",REACT_APP_USE_PHOTODIODE:"true",REACT_APP_USE_EEG:"true",REACT_APP_VOLUME:"true"}).REACT_APP_authDomain,projectId:Object({NODE_ENV:"production",PUBLIC_URL:".",REACT_APP_USE_PHOTODIODE:"true",REACT_APP_USE_EEG:"true",REACT_APP_VOLUME:"true"}).REACT_APP_projectId||"no-firebase",storageBucket:Object({NODE_ENV:"production",PUBLIC_URL:".",REACT_APP_USE_PHOTODIODE:"true",REACT_APP_USE_EEG:"true",REACT_APP_VOLUME:"true"}).REACT_APP_storageBucket,messagingSenderId:Object({NODE_ENV:"production",PUBLIC_URL:".",REACT_APP_USE_PHOTODIODE:"true",REACT_APP_USE_EEG:"true",REACT_APP_VOLUME:"true"}).REACT_APP_messagingSenderId,appId:Object({NODE_ENV:"production",PUBLIC_URL:".",REACT_APP_USE_PHOTODIODE:"true",REACT_APP_USE_EEG:"true",REACT_APP_VOLUME:"true"}).REACT_APP_appId});g.a.initializeApp(E);var b=g.a.firestore();"localhost"===window.location.hostname&&b.useEmulator("localhost",8080);var O=function(){var e=Object(u.a)(s.a.mark(function e(t,n,r){var a,o,i,c,d;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a="".concat(n,"/").concat(t,"/").concat(r),o=g.a.storage(),i=o.ref(a),e.next=5,i.listAll();case 5:return c=e.sent,d=c.items.map(function(){var e=Object(u.a)(s.a.mark(function e(t){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getDownloadURL();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),e.next=9,Promise.all(d);case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}},e)}));return function(t,n,r){return e.apply(this,arguments)}}(),y=function(e,t,n){return b.collection("participant_responses").doc(t).collection("participants").doc(e).collection("data").doc(n).set({start_time:n,app_version:window.navigator.appVersion,app_platform:window.navigator.platform,results:[]}).then(function(){return!0}).catch(function(){return!1})},k=function(e){var t=e.participant_id,n=e.study_id,r=e.start_date;b.collection("participant_responses").doc(n).collection("participants").doc(t).collection("data").doc(r).update("results",g.a.firestore.FieldValue.arrayUnion(e)).then(function(){return!0}).catch(function(e){return console.error("Error adding to Firebase:",e),!1})},w=g.a.firestore,P=(w.TimeStamp,w.GeoPoint,g.a,n(2)),j=n(8),T=n(9),S=function(){return{type:"html_button_response",stimulus:Object(T.a)("<div><h1>".concat(P.g.task.name,"</h1></div>"),!0)+Object(j.b)(),prompt:"",choices:[P.g.prompt.continue.button]}},U=function(){return{type:"html_button_response",stimulus:Object(T.a)("<div>\n    <h2 id='usb-alert'></h2>\n    <br><p>".concat(P.g.prompt.focus,"</p>\n    </div>"),!0)+Object(j.b)(),choices:[P.g.prompt.continue.button]}},A=n(11),x=n.n(A),C=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=(n?'<div class="task-container"><div id="fixation-dot" class="color-green"> </div></div>':'<div class="task-container"><div id="fixation-dot" class="color-white"> </div></div>')+Object(j.b)(),o=P.e.fixation,i=t?f(e):e;return{type:"html_keyboard_response",choices:p.jsPsych.NO_KEYS,stimulus:a,response_ends_trial:!1,trial_duration:i,on_load:function(){Object(j.a)(o),r&&x()("html").css("cursor","none")},on_finish:function(e){e.code=o,r&&x()("html").css("cursor","auto")}}},R=function(e,t){var n=P.e.evidence;return{type:"image_keyboard_response",stimulus:e,prompt:Object(j.b)(),response_ends_trial:!1,trial_duration:f(t),on_load:function(){x()("#jspsych-image-keyboard-response-stimulus").addClass("image"),x()("#jspsych-image-keyboard-response-stimulus").height(P.f.height),x()("#jspsych-image-keyboard-response-stimulus").width(P.f.width),x()("html").css("cursor","none"),Object(j.a)(n)},on_finish:function(e){e.code=n,x()("html").css("cursor","auto")}}},I=n(29),D=n(21),N=n.n(D),L=function(e,t,n,r,a){var o=e-r,i=t-a;return Math.sqrt(o*o+i*i)<n},M=function(e,t,n,r,a){for(var o=0;o<r.length;o++){var i=r[o];if(L(i.x,i.y,a,e,t))return i}return null},V=P.j.canvasSize,B=P.j.circleRadius,F=P.j.cursorRadius,q='<canvas width="'.concat(V,'" height="').concat(V,'" id="jspsych-canvas">\n    Your browser does not support HTML5 canvas\n  </canvas>'),H=function(){var e='<div class="task-container">'+q+Object(j.b)()+"</div>";return{type:"call_function",async:!0,func:function(t){var n=P.e.show_ratings,r=P.e.rate,a=Date.now();document.getElementById("jspsych-content").innerHTML=e;var o,i=document.querySelector("#jspsych-canvas"),c=i.getContext("2d");x()("html").css("cursor","none");var s=x()("#jspsych-canvas").width()/2,u=0,d=x()("#jspsych-canvas").height()/2,p=0,l=[],f=function(){return Date.now()-a},_=function(){return l.push({x:s,y:d,elapsed:f()})};_();var h=function(e,t,n){var r=n/2,a=.85*r,o=t-e+1,i=Math.PI/(o-1);return N.a.range(e,t+1).map(function(e){var t=i*e-Math.PI/2;return{n:e,x:a*Math.sin(t)+r,y:a*Math.cos(t)+r}})}(P.j.min,P.j.max,V),m=function(){c.clearRect(0,0,i.width,i.height),function(e,t,n){t<1e4||(e.font="20px arial",e.textBaseline="middle",e.textAlign="center",e.fillStyle="#ffffff",e.fillText("Please select a rating",n/2,.25*n))}(c,f(),V),function(e,t,n,r,a,o){e.font=.8*n+"px arial",e.textBaseline="middle",e.textAlign="center";var i=M(r,a,0,t,n);t.forEach(function(t){e.fillStyle=t===i?"#778899":"#D3D3D3",e.beginPath(),e.arc(t.x,t.y,n,0,2*Math.PI,!0),e.fill(),e.fillStyle="#000000",e.fillText(t.n.toString(),t.x,t.y+3.5)})}(c,h,B,s,d),function(e,t){e.fillStyle="#ffffff",e.beginPath(),e.arc(t/2,t/2,7.5,0,2*Math.PI,!0),e.fill()}(c,V),function(e,t,n,r){e.beginPath(),e.moveTo(t,n-r),e.lineTo(t,n+r),e.moveTo(t-r,n),e.lineTo(t+r,n),e.lineWidth=3,e.strokeStyle="#a6a6a6",e.stroke()}(c,s,d,F)};m(),Object(j.a)(n),setTimeout(m,1e4),i.requestPointerLock();var v=function(e){s+=e.originalEvent.movementX,d+=e.originalEvent.movementY;var t=Math.sign(e.originalEvent.movementX),n=Math.sign(e.originalEvent.movementY),r=!1;t!==u&&0!==t&&(_(),u=t,r=!0),n!==p&&0!==n&&(r||_(),p=n),s>i.width-F&&(s=i.width-F),d>i.height-F&&(d=i.height-F),s<F&&(s=F),d<F&&(d=F),o||(o=requestAnimationFrame(function(){o=null,m()}))};x()(document).bind("mousemove",v),x()(document).bind("click",function e(){var a=M(s,d,0,h,B);if(a){var o=f();Object(j.a)(r),_(),x()(document).unbind("mousemove",v),x()(document).unbind("click",e),setTimeout(function(){x()("html").css("cursor","auto"),t({circle:a,click:{x:s,y:d},code:[n,r],rt:o,path:l})},500)}})}}},G=function(e){return{type:"html_keyboard_response",timeline:[C(2e3,!0,!1,!0),C(200,!1,!0,!0),R(e,3e3),H()]}},z=function(e){return{type:"html_keyboard_response",timeline:function(e){for(var t=[],n=0;n<e.repeats_per_condition;n++){for(var r=m(h(e.images.neutral)),a=m(h(e.images.provoking));r.length>0&&a.length>0;)r.length-a.length>=3?t.push(r.pop()):a.length-r.length>=3?t.push(a.pop()):Math.random()>.5?t.push(r.pop()):t.push(a.pop());t.push.apply(t,Object(I.a)(r)),t.push.apply(t,Object(I.a)(a))}return t}(e).map(function(e){return G(e)})}},Y=n(23),K=n.n(Y),J=function(e){return{type:"html_keyboard_response",stimulus:Object(T.a)("<h1>".concat(P.g.task.end,"</h1>"),!0)+Object(j.b)(),trial_duration:e,on_load:function(){P.d.USE_VIDEO&&(console.log("finished"),window.cameraCapture.stop(),window.screenCapture.stop())}}},W=function(e,t){var n=P.e.start_break,r=Object(T.a)("\n    <div class='instructions'>\n  <h1>".concat(P.g.block.end_p1,"\n    ").concat(e,"\n    ").concat(P.g.block.end_p2,"\n    ").concat(t,"\n    ").concat(P.g.block.end_p3,"</h1>\n  <h2>").concat(P.g.block.break_p1,"\n    ").concat(e+1,"\n    ").concat(P.g.block.break_p2,"\n    ").concat(t,"\n    ").concat(P.g.block.break_p3,"</h2>\n  </div>"),!0)+Object(j.b)();return{type:"audio_keyboard_response",stimulus:P.b,prompt:r,choices:[],response_ends_trial:!1,trial_ends_after_audio:!0,on_load:function(){Object(j.a)(n)},on_finish:function(e){e.code=n}}},X=function(e,t){var n=D.range(t,0,-1).map(function(e){return{prompt:"<h1>".concat(e,"</h1>")}});return{type:"html_keyboard_response",stimulus:Object(T.a)("<h3>".concat(e,"</h3>"),!0),trial_duration:1e3,response_ends_trial:!1,timeline:n}},Q=function(){return{type:"html_keyboard_response",stimulus:Object(T.a)("<h1>".concat(P.g.prompt.setting_up,"</h1>"),!0)+Object(j.b)(),trial_duration:2e3,on_load:function(){Object(j.a)(P.e.open_provoc_task),function(e){var t=new AudioContext,n=t.createOscillator(),r=t.createGain();n.type=e.type,n.connect(r),n.frequency.setValueAtTime(e.frequency,0),r.connect(t.destination),n.start(),n.stop(t.currentTime+.4)}(P.a)}}},Z=!1,$=!1,ee=!1,te=function(){var e=Object(u.a)(s.a.mark(function e(){var t,n,r;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=p.jsPsych.data.get().select("participant_id").values[0],n=p.jsPsych.data.get().select("study_id").values[0],r={neutral:[],provoking:[]},e.next=5,O(t,n,"neutral");case 5:return r.neutral=e.sent,e.next=8,O(t,n,"provoking");case 8:return r.provoking=e.sent,e.abrupt("return",r);case 10:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),ne=function(e){var t=e.neutral.length,n=e.provoking.length;t===P.h&&n===P.h||(P.d.USE_ELECTRON?ee.send("error","Number of images provided does not meet requirement.  Found ".concat(t," neutral images and ").concat(n," provoking images, the settings for this task requires ").concat(P.h," of each type.")):alert("Number of images provided does not meet requirement.  Found ".concat(t," neutral images and ").concat(n," provoking images, the settings for this task requires ").concat(P.h," of each type. Please reload and try again.")))},re=function(){var e=Object(u.a)(s.a.mark(function e(){var t,n,r,a,o,i,c,u,d;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!P.d.USE_ELECTRON){e.next=25;break}return Z=window.require("electron").remote.app,$=window.require("fs"),t=window.require("electron"),ee=t.ipcRenderer,e.prev=5,n=p.jsPsych.data.get().select("participant_id").values[0],r=K.a.join(Z.getPath("desktop"),"provocation-images","".concat(n)),a=K.a.join(r,"neutral"),o=K.a.join(r,"provoking"),i=$.readdirSync(a),c=$.readdirSync(o),(u={neutral:[],provoking:[]}).neutral=i.map(function(e){return"file://"+K.a.join(a,e)}),u.provoking=c.map(function(e){return"file://"+K.a.join(o,e)}),ne(u),e.abrupt("return",u);case 19:e.prev=19,e.t0=e.catch(5),console.log("Error loading local files - using default images"),ee.send("error","Could not load images from local device. - ".concat(e.t0));case 23:e.next=31;break;case 25:if(!P.d.USE_FIREBASE){e.next=31;break}return e.next=28,te();case 28:return d=e.sent,ne(d),e.abrupt("return",d);case 31:case"end":return e.stop()}},e,null,[[5,19]])}));return function(){return e.apply(this,arguments)}}(),ae=function(e){var t={type:"html_keyboard_response",trial_duration:1,stimulus:"",prompt:"",on_start:function(){var t=Object(u.a)(s.a.mark(function t(){var n,r;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,re(e);case 2:for(n=t.sent,e.images.neutral=n.neutral,e.images.provoking=n.provoking,r=1;r<=e.num_repeats;)p.jsPsych.addNodeToEndOfTimeline(X(P.g.countdown.message,3),function(){}),p.jsPsych.addNodeToEndOfTimeline(z(e),function(){}),r<e.num_repeats?p.jsPsych.addNodeToEndOfTimeline(W(r,e.num_repeats),function(){}):p.jsPsych.addNodeToEndOfTimeline(J(5e3),function(){}),r+=1;case 7:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}()};return{type:"html_keyboard_response",timeline:P.d.USE_EEG?[t,Q()]:[t]}},oe=Object(T.a)("\n    <div class='instructions'>\n    <h1>".concat(P.g.instructions.welcome,"</h1>\n    <p>").concat(P.g.instructions.p1,"</p>\n    <p>").concat(P.g.instructions.p2,"</p>\n    </div>\n    "),!0),ie=Object(T.a)("\n    <div class='instructions'>\n    <p>".concat(P.g.instructions.fixation,'</p>\n    <div id="fixation-dot" class="color-white"></div>\n    </div>\n    '),!0),ce=Object(T.a)("\n    <div class='instructions'>\n    <p>".concat(P.g.instructions.rate,"</p>\n    </div>\n    "),!0),se=Object(T.a)("\n    <div class='instructions'>\n    <p>".concat(P.g.instructions.rate_practice,"</p>\n    </div>\n    "),!0),ue=Object(T.a)("\n    <div class='instructions'>\n    <p>".concat(P.g.instructions.no_talking,"</p>\n    </div>\n    "),!0),de=Object(T.a)("\n    <div class='instructions'>\n    <p>".concat(P.g.instructions.instruction_end,"</p>\n    </div>\n    "),!0),pe={type:"instructions",show_clickable_nav:!0,pages:[oe,Object(T.a)("\n  <div class='instructions'>\n  <p>".concat(P.g.instructions.breathing,"</p>\n  </div>\n  "),!0),ie,ce,se]},le={type:"instructions",show_clickable_nav:!0,pages:[ue,de]},fe=function(){return{type:"html_button_response",stimulus:Object(T.a)("\n    <div class='instructions'>\n    <h1>".concat(P.g.instructions.adjust_volume,"</h1>\n    </div>\n    "),!0),choices:[P.g.prompt.continue.button],response_ends_trial:!0}},_e=n(34),he=[S()];P.d.USE_VOLUME&&he.push(fe()),P.d.USE_VIDEO&&he.push(Object(_e.a)()),P.d.USE_EEG&&he.push(U()),he.push(ae(P.c),pe,z(P.i),le);var me=he,ve=P.d.USE_MTURK?[]:me;var ge=function(e){var t=e.dataUpdateFunction,n=e.dataFinishFunction;return a.a.createElement("div",{className:"App"},a.a.createElement(p.Experiment,{settings:{timeline:ve,preload_audio:[P.b],on_data_update:function(e){return t(e)},on_finish:function(e){return n(e)}}}))},Ee=n(20),be=n(36);var Oe=function(e){var t=e.onLogin,n=e.envParticipantId,o=e.envStudyId,i=e.validationFunction,c=Object(r.useState)(""),s=Object(d.a)(c,2),u=s[0],p=s[1],l=Object(r.useState)(""),f=Object(d.a)(l,2),_=f[0],h=f[1],m=Object(r.useState)(!1),v=Object(d.a)(m,2),g=v[0],E=v[1];return Object(r.useEffect)(function(){p(n),h(o)},[n,o]),a.a.createElement("div",{className:"centered-h-v"},a.a.createElement("div",{className:"width-50 max-width-600px"},g?a.a.createElement("div",{className:"alert alert-danger",role:"alert"},"The participant ID and study ID do not match"):null,a.a.createElement(Ee.a,{className:"centered-h-v",onSubmit:function(e){e.preventDefault(),i(u,_).then(function(e){e?t(e,_,u):E(!0)})}},a.a.createElement(Ee.a.Group,{className:"width-100",size:"lg",controlId:"participantId"},a.a.createElement(Ee.a.Label,null,"Participant ID"),a.a.createElement(Ee.a.Control,{autoFocus:!0,type:"participantId",value:u,onChange:function(e){return p(e.target.value)}})),a.a.createElement(Ee.a.Group,{className:"width-100",size:"lg",controlId:"studyId"},a.a.createElement(Ee.a.Label,null,"Study ID"),a.a.createElement(Ee.a.Control,{type:"studyId",value:_,onChange:function(e){return h(e.target.value)}})),a.a.createElement(be.a,{style:{width:"100%"},block:!0,size:"lg",type:"submit",disabled:!(u.length>0&&_.length>0)},"Log In"))))},ye=n(35);var ke=function(){var e=Object(r.useState)(!1),t=Object(d.a)(e,2),n=t[0],o=t[1],i=Object(r.useState)(!1),c=Object(d.a)(i,2),f=c[0],h=c[1],m=Object(r.useState)(!1),g=Object(d.a)(m,2),E=g[0],b=g[1],O=Object(r.useState)(""),w=Object(d.a)(O,2),j=w[0],T=w[1],S=Object(r.useState)(""),U=Object(d.a)(S,2),A=U[0],x=U[1],C=Object(r.useState)("default"),R=Object(d.a)(C,2),I=R[0],D=R[1],N=Object(r.useState)(!1),L=Object(d.a)(N,2),M=L[0],V=L[1],B=(new Date).toISOString(),F=new URLSearchParams(window.location.search),q=function(){var e=Object(u.a)(s.a.mark(function e(){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),H=function(){},G=Object(r.useCallback)(function(e,t,n){e&&p.jsPsych.data.addProperties({participant_id:n,study_id:t,start_date:B,task_version:ye.a}),o(e)},[B]);return Object(r.useEffect)(function(){if(console.log("Environment configuration:",P.d),P.d.USE_ELECTRON){var e=window.require("electron").ipcRenderer;h(e),e.send("updateEnvironmentVariables",P.d);var t=e.sendSync("syncCredentials");t.envParticipantId&&T(t.envParticipantId),t.envStudyId&&x(t.envStudyId),D("desktop")}else if(P.d.USE_MTURK){window.lodash=_.noConflict();var n=v();b(new PsiTurk(n,"/complete")),D("mturk"),G(!0,"mturk",n)}else if(P.d.USE_FIREBASE){D("firebase");var r=F.get("participantID"),a=F.get("studyID");r&&T(r),a&&x(a)}else V(!0)},[G,F]),M?a.a.createElement("div",{className:"centered-h-v"},a.a.createElement("div",{className:"width-50 alert alert-danger"},"Please tell your task provider to enable Firebase.")):a.a.createElement(a.a.Fragment,null,n?a.a.createElement(ge,{dataUpdateFunction:{desktop:function(e){f.send("data",e)},firebase:function(e){k(e)},mturk:function(e){E.recordTrialData(e)},default:H}[I],dataFinishFunction:{desktop:function(){f.send("end","true")},mturk:function(){!function(){var e=Object(u.a)(s.a.mark(function e(){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return E.saveData(),e.next=3,l(5e3);case 3:E.completeHIT();case 4:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()()},firebase:H,default:H}[I]}):a.a.createElement(Oe,{validationFunction:{desktop:q,default:q,firebase:function(e,t){return y(e,t,B)}}[I],envParticipantId:j,envStudyId:A,onLogin:G}))};i.a.render(a.a.createElement(ke,null),document.getElementById("root"))}],[[37,1,2]]]);
//# sourceMappingURL=main.05dc9f17.chunk.js.map