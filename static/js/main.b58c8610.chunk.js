(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,function(e,t,n){"use strict";n.d(t,"c",function(){return T}),n.d(t,"e",function(){return _}),n.d(t,"g",function(){return h}),n.d(t,"i",function(){return P}),n.d(t,"b",function(){return w}),n.d(t,"f",function(){return k}),n.d(t,"h",function(){return j}),n.d(t,"a",function(){return O}),n.d(t,"j",function(){return A});var r=n(15),a=n(21),o=n.n(a),i=n(30);n.d(t,"d",function(){return i.eventCodes});var c=!r.jsPsych.turk.turkInfo().outsideTurk,s="true"===Object({NODE_ENV:"production",PUBLIC_URL:".",REACT_APP_USE_PHOTODIODE:"true",REACT_APP_BREATHING_AUDIO:"PlaceHolderBreathingForButler",REACT_APP_USE_EEG:"true",REACT_APP_VOLUME:"true"}).REACT_APP_VIDEO,u="true"===Object({NODE_ENV:"production",PUBLIC_URL:".",REACT_APP_USE_PHOTODIODE:"true",REACT_APP_BREATHING_AUDIO:"PlaceHolderBreathingForButler",REACT_APP_USE_EEG:"true",REACT_APP_VOLUME:"true"}).REACT_APP_FIREBASE,d=!0;try{window.require("electron")}catch(U){d=!1}var l="true"===Object({NODE_ENV:"production",PUBLIC_URL:".",REACT_APP_USE_PHOTODIODE:"true",REACT_APP_BREATHING_AUDIO:"PlaceHolderBreathingForButler",REACT_APP_USE_EEG:"true",REACT_APP_VOLUME:"true"}).REACT_APP_HIDE_FRAME_ELECTRON&&d,p=d,f=d,_={width:600,height:600},h=10,m=function(e){return e.keys().map(e)},v=(i.eventCodes.open_provoc_task,m(n(50))),E=m(n(54)),b=m(n(59)),g=m(n(61)),O=o.a.filter(g,function(e){return e.includes("PlaceHolderBreathingForButler")})[0];console.log(O);var P={min:0,max:10,canvasSize:640,circleRadius:28,cursorRadius:7.5},k=n(64);if(c){var y=n(65);o.a.merge(k,y)}var w={num_repeats:2,images:{neutral:v,provoking:E},repeats_per_condition:3,is_practice:!1},j={images:{neutral:b,provoking:[]},repeats_per_condition:1,is_practice:!0},A="Provocation",T={USE_MTURK:c,USE_VIDEO:s,USE_ELECTRON:d,USE_FIREBASE:u,USE_EEG:p,HIDE_FRAME_ELECTRON:l,USE_PHOTODIODE:f,USE_VOLUME:!0}},,,,,,,function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return"<div class=".concat(t?"main-prompt":"task-container",">").concat(e,"</div>")}},function(e,t,n){"use strict";n.d(t,"b",function(){return s}),n.d(t,"a",function(){return u});var r=n(2),a=n(11),o=n.n(a),i=!1;if(r.c.USE_ELECTRON){var c=window.require("electron");i=c.ipcRenderer}var s=function(){var e=r.c.USE_PHOTODIODE?"visible":"invisible";return'<div class="photodiode-box '.concat(e,'" id="photodiode-box">\n\t\t\t\t\t\t\t\t\t<span id="photodiode-spot" class="photodiode-spot"></span>\n  \t\t\t\t\t\t\t\t</div>')},u=function(e){if(r.c.USE_PHOTODIODE){var t=e;e<r.d.open_provoc_task&&(t=1),function e(t,n){n>0&&function(e,t){o()(".photodiode-spot").css({"background-color":"white"}),setTimeout(function(){o()(".photodiode-spot").css({"background-color":"black"}),t()},e)}(t,function(){setTimeout(function(){e(t,n-1)},t)})}(40,t),i&&(i.send("trigger",e),setTimeout(function(){i.send("trigger",0)},5))}}},,,,,,,,,,,,,,,,,,,,function(e,t){e.exports={eventCodes:{open_provoc_task:13,fixation:1,evidence:5,show_ratings:7,rate:2,start_break:8,test_connect:32}}},,,,,function(e,t,n){"use strict";(function(e){var r=n(8),a=n.n(r),o=n(36),i=n(16),c=n(2),s=n(10),u=n(9),d=n(15),l=!1;if(c.c.USE_ELECTRON){var p=window.require("electron");l=p.ipcRenderer}t.a=function(){document.title=c.j;var t='\n  <div class="d-flex flex-column align-items-center">\n  <p>'.concat(c.f.instructions.camera,'</p>\n  <video id="camera" width="640" height="480" autoplay></video>\n  </div>\n  ');return{type:"html_button_response",stimulus:Object(u.a)(t,!1)+Object(s.b)(),choices:[c.f.prompt.continue.button],response_ends_trial:!0,on_load:function(){var t=d.jsPsych.data.get().values()[0].participant_id,n=document.getElementById("camera"),r=function(r,a){console.log(r),"cameraCapture"===a&&(n.srcObject=r);var o=[];window[a]=new MediaRecorder(r,{mimeType:"video/webm"}),window[a].addEventListener("dataavailable",function(e){e.data.size>0&&o.push(e.data)}),window[a].addEventListener("stop",function(){!function(t,n,r){var a=new FileReader,o="pid_".concat(r,"_").concat(n,"_").concat(Date.now(),".webm");a.onload=function(){if(2===a.readyState){var t=new e(a.result);l.send("save_video",o,t)}},a.readAsArrayBuffer(t)}(new Blob(o),a,t)})};navigator.mediaDevices.getUserMedia({video:!0}).then(function(e){return r(e,"cameraCapture")}),window.require("electron").desktopCapturer.getSources({types:["window"]}).then(function(){var e=Object(i.a)(a.a.mark(function e(t){var n,i,s;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=Object(o.a)(t);try{for(n.s();!(i=n.n()).done;)(s=i.value).name===c.j&&navigator.mediaDevices.getUserMedia({video:{mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:s.id}}}).then(function(e){r(e,"screenCapture")}).catch(function(e){return console.log(e)})}catch(a){n.e(a)}finally{n.f()}case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}())},on_finish:function(){c.c.USE_ELECTRON&&(window.cameraCapture.start(),window.screenCapture.start())}}}}).call(this,n(66).Buffer)},,function(e){e.exports={a:"2.2.0"}},,function(e,t,n){e.exports=n(73)},,,,,function(e,t,n){},,function(e,t,n){},,,,function(e,t,n){var r={"./1_happy.jpg":51,"./2_happy.jpg":52,"./3_happy.jpg":53};function a(e){var t=o(e);return n(t)}function o(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}a.keys=function(){return Object.keys(r)},a.resolve=o,e.exports=a,a.id=50},function(e,t,n){e.exports=n.p+"static/media/1_happy.18aba42e.jpg"},function(e,t,n){e.exports=n.p+"static/media/2_happy.9545f071.jpg"},function(e,t,n){e.exports=n.p+"static/media/3_happy.c893ae7f.jpg"},function(e,t,n){var r={"./4_sad.jpeg":55,"./5_sad.jpeg":56,"./6_sad.jpeg":57,"./7_unknown.jpeg":58};function a(e){var t=o(e);return n(t)}function o(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}a.keys=function(){return Object.keys(r)},a.resolve=o,e.exports=a,a.id=54},function(e,t,n){e.exports=n.p+"static/media/4_sad.104fb27c.jpeg"},function(e,t,n){e.exports=n.p+"static/media/5_sad.ef6dac84.jpeg"},function(e,t,n){e.exports=n.p+"static/media/6_sad.bb879b1e.jpeg"},function(e,t,n){e.exports=n.p+"static/media/7_unknown.c348d28c.jpeg"},function(e,t,n){var r={"./istockphoto-888845986-612x612.jpg":60};function a(e){var t=o(e);return n(t)}function o(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}a.keys=function(){return Object.keys(r)},a.resolve=o,e.exports=a,a.id=59},function(e,t,n){e.exports=n.p+"static/media/istockphoto-888845986-612x612.23164b56.jpg"},function(e,t,n){var r={"./PlaceHolderBreathingForButler.m4a":62,"./breathing_exercise.m4a":63};function a(e){var t=o(e);return n(t)}function o(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}a.keys=function(){return Object.keys(r)},a.resolve=o,e.exports=a,a.id=61},function(e,t,n){e.exports=n.p+"static/media/PlaceHolderBreathingForButler.baf2b4f7.m4a"},function(e,t,n){e.exports=n.p+"static/media/breathing_exercise.b4b71d9b.m4a"},function(e){e.exports={task:{name:"Provocation Task",end:"This experiment has ended."},prompt:{skip:"Skip breathing exercise",continue:{press:"Press any key to continue.",button:"Continue"},focus:"Make sure the photodiode is aligned and the EEG recording has begun before continuing.",setting_up:"Setting up task, please wait..."},eventMarker:{found:"Hold the USB event marker in front of the camera.",not_found:"Note: no USB event marker found."},instructions:{welcome:"Welcome!",p1:"During the task, you will see a series of neutral images and anxiety-provoking images.",p2:"You will be asked to rate your level of distress from 0-10 in response to each image, where 0 is no distress and 10 is the highest level of distress.",fixation:"Throughout the experiment, you'll see this fixation point at the center of the screen. <br> Try to keep your eyes focused on the fixation point during the task.",rate:"Next, you will do one practice trial. You will see the fixation point, followed by an image. Then, you will be asked to submit your rating when you\u2019re ready.",rate_practice:"Try submitting a rating of \u201c5\u201d by dragging the cursor to \u201c5\u201d and clicking to submit.",no_talking:"Try not to talk or move around more than necessary, as movements affect the quality of the recordings.",instruction_end:"In a few moments, the task will begin.",block_end:"Block 1 of 2 is now complete.",block_break:"Take a 10 second break and continue to block 2 of 2.",adjust_volume:"Set tablet volume to 50/100.",camera:"Make sure the camera is pointing to you and your face is within the camera area.",breathing:"Halfway through the task, you will be guided through a 3 minute guided deep breathing exercise."},block:{end_p1:"Block ",end_p2:" of ",end_p3:" is now complete.",break_p1:"You will now do a 3 minute guided breathing exercise before continuing to block ",break_p2:" of ",break_p3:"."},countdown:{message:"Provocation will begin in:"}}},function(e){e.exports={}},,,,,,,,function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),o=n(34),i=n.n(o),c=(n(44),n(8)),s=n.n(c),u=n(16),d=n(14),l=n(15),p=(n(46),n(47),n(48),function(e){return new Promise(function(t){return setTimeout(t,e)})}),f=function(e){return function(e,t){return e+Math.floor(Math.random()*Math.floor(t))}(e,50)},h=function(e){return JSON.parse(JSON.stringify(e))},m=function(e){for(var t,n,r=e.length;0!==r;)n=Math.floor(Math.random()*r),t=e[r-=1],e[r]=e[n],e[n]=t;return e},v=function(){var e=l.jsPsych.turk.turkInfo();return"".concat(e.workerId,":").concat(e.assignmentId)},E=n(22),b=(n(74),n(75),{apiKey:Object({NODE_ENV:"production",PUBLIC_URL:".",REACT_APP_USE_PHOTODIODE:"true",REACT_APP_BREATHING_AUDIO:"PlaceHolderBreathingForButler",REACT_APP_USE_EEG:"true",REACT_APP_VOLUME:"true"}).REACT_APP_apiKey,authDomain:Object({NODE_ENV:"production",PUBLIC_URL:".",REACT_APP_USE_PHOTODIODE:"true",REACT_APP_BREATHING_AUDIO:"PlaceHolderBreathingForButler",REACT_APP_USE_EEG:"true",REACT_APP_VOLUME:"true"}).REACT_APP_authDomain,projectId:Object({NODE_ENV:"production",PUBLIC_URL:".",REACT_APP_USE_PHOTODIODE:"true",REACT_APP_BREATHING_AUDIO:"PlaceHolderBreathingForButler",REACT_APP_USE_EEG:"true",REACT_APP_VOLUME:"true"}).REACT_APP_projectId||"no-firebase",storageBucket:Object({NODE_ENV:"production",PUBLIC_URL:".",REACT_APP_USE_PHOTODIODE:"true",REACT_APP_BREATHING_AUDIO:"PlaceHolderBreathingForButler",REACT_APP_USE_EEG:"true",REACT_APP_VOLUME:"true"}).REACT_APP_storageBucket,messagingSenderId:Object({NODE_ENV:"production",PUBLIC_URL:".",REACT_APP_USE_PHOTODIODE:"true",REACT_APP_BREATHING_AUDIO:"PlaceHolderBreathingForButler",REACT_APP_USE_EEG:"true",REACT_APP_VOLUME:"true"}).REACT_APP_messagingSenderId,appId:Object({NODE_ENV:"production",PUBLIC_URL:".",REACT_APP_USE_PHOTODIODE:"true",REACT_APP_BREATHING_AUDIO:"PlaceHolderBreathingForButler",REACT_APP_USE_EEG:"true",REACT_APP_VOLUME:"true"}).REACT_APP_appId});E.a.initializeApp(b);var g=E.a.firestore();"localhost"===window.location.hostname&&g.useEmulator("localhost",8080);var O=function(){var e=Object(u.a)(s.a.mark(function e(t,n,r){var a,o,i,c,d;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a="".concat(n,"/").concat(t,"/").concat(r),o=E.a.storage(),i=o.ref(a),e.next=5,i.listAll();case 5:return c=e.sent,d=c.items.map(function(){var e=Object(u.a)(s.a.mark(function e(t){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getDownloadURL();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),e.next=9,Promise.all(d);case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}},e)}));return function(t,n,r){return e.apply(this,arguments)}}(),P=function(e,t,n){return g.collection("participant_responses").doc(t).collection("participants").doc(e).collection("data").doc(n).set({start_time:n,app_version:window.navigator.appVersion,app_platform:window.navigator.platform,results:[]}).then(function(){return!0}).catch(function(){return!1})},k=function(e){var t=e.participant_id,n=e.study_id,r=e.start_date;g.collection("participant_responses").doc(n).collection("participants").doc(t).collection("data").doc(r).update("results",E.a.firestore.FieldValue.arrayUnion(e)).then(function(){return!0}).catch(function(e){return console.error("Error adding to Firebase:",e),!1})},y=E.a.firestore,w=(y.TimeStamp,y.GeoPoint,E.a,n(2)),j=n(25),A=n(10),T=n(11),U=n.n(T),I=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=(n?'<div class="task-container"><div id="fixation-dot" class="color-green"> </div></div>':'<div class="task-container"><div id="fixation-dot" class="color-white"> </div></div>')+Object(A.b)(),o=w.d.fixation,i=t?f(e):e;return{type:"html_keyboard_response",choices:l.jsPsych.NO_KEYS,stimulus:a,response_ends_trial:!1,trial_duration:i,on_load:function(){Object(A.a)(o),r&&U()("html").css("cursor","none")},on_finish:function(e){e.code=o,r&&U()("html").css("cursor","auto")}}},R=function(e,t){var n=w.d.evidence;return{type:"image_keyboard_response",stimulus:e,prompt:Object(A.b)(),response_ends_trial:!1,trial_duration:f(t),on_load:function(){U()("#jspsych-image-keyboard-response-stimulus").addClass("image"),U()("#jspsych-image-keyboard-response-stimulus").height(w.e.height),U()("#jspsych-image-keyboard-response-stimulus").width(w.e.width),U()("html").css("cursor","none"),Object(A.a)(n)},on_finish:function(e){e.code=n,U()("html").css("cursor","auto")}}},S=n(21),C=n.n(S),x=function(e,t,n,r,a){var o=e-r,i=t-a;return Math.sqrt(o*o+i*i)<n},D=function(e,t,n,r,a){for(var o=0;o<r.length;o++){var i=r[o];if(x(i.x,i.y,a,e,t))return i}return null},N=w.i.canvasSize,B=w.i.circleRadius,L=w.i.cursorRadius,M='<canvas width="'.concat(N,'" height="').concat(N,'" id="jspsych-canvas">\n    Your browser does not support HTML5 canvas\n  </canvas>'),H=function(){var e='<div class="task-container">'+M+Object(A.b)()+"</div>";return{type:"call_function",async:!0,func:function(t){var n=w.d.show_ratings,r=w.d.rate,a=Date.now();document.getElementById("jspsych-content").innerHTML=e;var o,i=document.querySelector("#jspsych-canvas"),c=i.getContext("2d");U()("html").css("cursor","none");var s=U()("#jspsych-canvas").width()/2,u=0,d=U()("#jspsych-canvas").height()/2,l=0,p=[],f=function(){return Date.now()-a},_=function(){return p.push({x:s,y:d,elapsed:f()})};_();var h=function(e,t,n){var r=n/2,a=.85*r,o=t-e+1,i=Math.PI/(o-1);return C.a.range(e,t+1).map(function(e){var t=i*e-Math.PI/2;return{n:e,x:a*Math.sin(t)+r,y:a*Math.cos(t)+r}})}(w.i.min,w.i.max,N),m=function(){c.clearRect(0,0,i.width,i.height),function(e,t,n){t<1e4||(e.font="20px arial",e.textBaseline="middle",e.textAlign="center",e.fillStyle="#ffffff",e.fillText("Please select a rating",n/2,.25*n))}(c,f(),N),function(e,t,n,r,a,o){e.font=.8*n+"px arial",e.textBaseline="middle",e.textAlign="center";var i=D(r,a,0,t,n);t.forEach(function(t){e.fillStyle=t===i?"#778899":"#D3D3D3",e.beginPath(),e.arc(t.x,t.y,n,0,2*Math.PI,!0),e.fill(),e.fillStyle="#000000",e.fillText(t.n.toString(),t.x,t.y+3.5)})}(c,h,B,s,d),function(e,t){e.fillStyle="#ffffff",e.beginPath(),e.arc(t/2,t/2,7.5,0,2*Math.PI,!0),e.fill()}(c,N),function(e,t,n,r){e.beginPath(),e.moveTo(t,n-r),e.lineTo(t,n+r),e.moveTo(t-r,n),e.lineTo(t+r,n),e.lineWidth=3,e.strokeStyle="#a6a6a6",e.stroke()}(c,s,d,L)};m(),Object(A.a)(n),setTimeout(m,1e4);try{i.requestPointerLock()}catch(E){console.warn("pointer lock denied")}var v=function(e){s+=e.originalEvent.movementX,d+=e.originalEvent.movementY;var t=Math.sign(e.originalEvent.movementX),n=Math.sign(e.originalEvent.movementY),r=!1;t!==u&&0!==t&&(_(),u=t,r=!0),n!==l&&0!==n&&(r||_(),l=n),s>i.width-L&&(s=i.width-L),d>i.height-L&&(d=i.height-L),s<L&&(s=L),d<L&&(d=L),o||(o=requestAnimationFrame(function(){o=null,m()}))};U()(document).bind("mousemove",v),U()(document).bind("click",function e(){var a=D(s,d,0,h,B);if(a){var o=f();Object(A.a)(r),_(),U()(document).unbind("mousemove",v),U()(document).unbind("click",e),setTimeout(function(){U()("html").css("cursor","auto"),t({circle:a,click:{x:s,y:d},code:[n,r],rt:o,path:p})},500)}})}}},F=function(e){return{type:"html_keyboard_response",timeline:[I(2e3,!0,!1,!0),I(200,!1,!0,!0),R(e,3e3),H()]}},V=function(e){return{type:"html_keyboard_response",timeline:function(e){for(var t=[],n=0;n<e.repeats_per_condition;n++){for(var r=m(h(e.images.neutral)),a=m(h(e.images.provoking));r.length>0&&a.length>0;)r.length-a.length>=3?t.push(r.pop()):a.length-r.length>=3?t.push(a.pop()):Math.random()>.5?t.push(r.pop()):t.push(a.pop());t.push.apply(t,Object(j.a)(r)),t.push.apply(t,Object(j.a)(a))}return t}(e).map(function(e){return F(e)})}},G=n(9),q=function(){return{type:"html_button_response",stimulus:Object(G.a)("<div><h1>".concat(w.f.task.name,"</h1></div>"),!0)+Object(A.b)(),prompt:"",choices:[w.f.prompt.continue.button]}},z=function(){return{type:"html_button_response",stimulus:Object(G.a)("<div>\n    <h2 id='usb-alert'></h2>\n    <br><p>".concat(w.f.prompt.focus,"</p>\n    </div>"),!0)+Object(A.b)(),choices:[w.f.prompt.continue.button]}},Y=Object(G.a)("\n    <div class='instructions'>\n    <h1>".concat(w.f.instructions.welcome,"</h1>\n    <p>").concat(w.f.instructions.p1,"</p>\n    <p>").concat(w.f.instructions.p2,"</p>\n    </div>\n    "),!0),K=Object(G.a)("\n    <div class='instructions'>\n    <p>".concat(w.f.instructions.fixation,'</p>\n    <div id="fixation-dot" class="color-white"></div>\n    </div>\n    '),!0),J=Object(G.a)("\n    <div class='instructions'>\n    <p>".concat(w.f.instructions.rate,"</p>\n    </div>\n    "),!0),W=Object(G.a)("\n    <div class='instructions'>\n    <p>".concat(w.f.instructions.rate_practice,"</p>\n    </div>\n    "),!0),X=Object(G.a)("\n    <div class='instructions'>\n    <p>".concat(w.f.instructions.no_talking,"</p>\n    </div>\n    "),!0),Q=Object(G.a)("\n    <div class='instructions'>\n    <p>".concat(w.f.instructions.instruction_end,"</p>\n    </div>\n    "),!0),Z={type:"instructions",show_clickable_nav:!0,pages:[Y,Object(G.a)("\n  <div class='instructions'>\n  <p>".concat(w.f.instructions.breathing,"</p>\n  </div>\n  "),!0),K,J,W]},$={type:"instructions",show_clickable_nav:!0,pages:[X,Q]},ee=function(){return{type:"html_button_response",stimulus:Object(G.a)("\n    <div class='instructions'>\n    <h1>".concat(w.f.instructions.adjust_volume,"</h1>\n    </div>\n    "),!0),choices:[w.f.prompt.continue.button],response_ends_trial:!0}},te=n(35),ne=function(e,t){var n=S.range(t,0,-1).map(function(e){return{prompt:"<h1>".concat(e,"</h1>")}});return{type:"html_keyboard_response",stimulus:Object(G.a)("<h3>".concat(e,"</h3>"),!0),trial_duration:1e3,response_ends_trial:!1,timeline:n}},re=function(e,t){var n=w.d.start_break,r=Object(G.a)("\n    <div class='instructions'>\n  <h1>".concat(w.f.block.end_p1,"\n    ").concat(e,"\n    ").concat(w.f.block.end_p2,"\n    ").concat(t,"\n    ").concat(w.f.block.end_p3,"</h1>\n  <h2>").concat(w.f.block.break_p1,"\n    ").concat(e+1,"\n    ").concat(w.f.block.break_p2,"\n    ").concat(t,"\n    ").concat(w.f.block.break_p3,"</h2>\n  </div>"),!0)+Object(A.b)();return{type:"audio_keyboard_response",stimulus:w.a,prompt:r,choices:[],response_ends_trial:!1,trial_ends_after_audio:!0,on_load:function(){Object(A.a)(n)},on_finish:function(e){e.code=n}}},ae=function(e){return{type:"html_keyboard_response",stimulus:Object(G.a)("<h1>".concat(w.f.task.end,"</h1>"),!0)+Object(A.b)(),trial_duration:e,on_load:function(){w.c.USE_VIDEO&&(console.log("finished"),window.cameraCapture.stop(),window.screenCapture.stop())}}},oe=n(27),ie=n.n(oe),ce=!1,se=!1,ue=!1,de=function(){var e=Object(u.a)(s.a.mark(function e(t,n){var r;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r={neutral:[],provoking:[]},e.next=3,O(t,n,"neutral");case 3:return r.neutral=e.sent,e.next=6,O(t,n,"provoking");case 6:return r.provoking=e.sent,e.abrupt("return",r);case 8:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}(),le=function(e){var t=e.neutral.length,n=e.provoking.length;if(t!==w.g||n!==w.g){var r="Number of images provided does not meet requirement.  Found ".concat(t," neutral images and ").concat(n," provoking images, the settings for this task requires ").concat(w.g," of each type.");w.c.USE_ELECTRON?ue.send("error",r):alert(r)}},pe=function(e,t){var n=ie.a.join(ce.getPath("desktop"),"provocation-images","".concat(e)),r=ie.a.join(n,t);return se.readdirSync(r).map(function(e){return"file://"+ie.a.join(r,e)})},fe=function(){var e=Object(u.a)(s.a.mark(function e(t,n){var r,a,o;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!w.c.USE_ELECTRON){e.next=19;break}return ce=window.require("electron").remote.app,se=window.require("fs"),r=window.require("electron"),ue=r.ipcRenderer,e.prev=5,(a={}).neutral=pe(t,"neutral"),a.provoking=pe(t,"provoking"),le(a),e.abrupt("return",a);case 13:e.prev=13,e.t0=e.catch(5),console.warn("Error loading local files - using default images"),ue.send("error","Could not load images from local device. - ".concat(e.t0));case 17:e.next=25;break;case 19:if(!w.c.USE_FIREBASE){e.next=25;break}return e.next=22,de(t,n);case 22:return o=e.sent,le(o),e.abrupt("return",o);case 25:case"end":return e.stop()}},e,null,[[5,13]])}));return function(t,n){return e.apply(this,arguments)}}(),_e=function(){var e=Object(u.a)(s.a.mark(function e(t,n,r){var a,o,i;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fe(t,n);case 2:for(a=e.sent,r.images.neutral=a.neutral,r.images.provoking=a.provoking,o=[],i=1;i<r.num_repeats;i++)o.push(ne(w.f.countdown.message,3),V(r),re(i,r.num_repeats));return e.abrupt("return",o);case 8:case"end":return e.stop()}},e)}));return function(t,n,r){return e.apply(this,arguments)}}(),he=function(){var e=Object(u.a)(s.a.mark(function e(t,n){var r,a,o,i;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=[q()],w.c.USE_VOLUME&&r.push(ee()),w.c.USE_VIDEO&&r.push(Object(te.a)()),w.c.USE_EEG&&r.push(z()),r.push(Z,V(w.h),$),e.next=7,_e(t,n,w.b);case 7:return a=e.sent,r.push.apply(r,Object(j.a)(a)),r.push(ae(5e3)),o=r,i=[],e.abrupt("return",w.c.USE_MTURK?i:o);case 13:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}();var me=function(e){var t=e.dataUpdateFunction,n=e.dataFinishFunction,o=e.participantID,i=e.studyID,c=Object(r.useState)([]),s=Object(d.a)(c,2),u=s[0],p=s[1];return Object(r.useEffect)(function(){he(o,i).then(function(e){return p(e)})},[o,i]),0===u.length?a.a.createElement("div",{className:"App height-100"},a.a.createElement("div",{className:"centered-h-v"},"Loading task")):a.a.createElement("div",{className:"App"},a.a.createElement(l.Experiment,{settings:{timeline:u,preload_audio:[w.a],on_data_update:function(e){return t(e)},on_finish:function(e){return n(e)}}}))},ve=n(20),Ee=n(38);var be=function(e){var t=e.onLogin,n=e.envParticipantId,o=e.envStudyId,i=e.validationFunction,c=Object(r.useState)(""),s=Object(d.a)(c,2),u=s[0],l=s[1],p=Object(r.useState)(""),f=Object(d.a)(p,2),_=f[0],h=f[1],m=Object(r.useState)(!1),v=Object(d.a)(m,2),E=v[0],b=v[1];return Object(r.useEffect)(function(){l(n),h(o)},[n,o]),a.a.createElement("div",{className:"centered-h-v"},a.a.createElement("div",{className:"width-50 max-width-600px"},E?a.a.createElement("div",{className:"alert alert-danger",role:"alert"},"The participant ID and study ID do not match"):null,a.a.createElement(ve.a,{className:"centered-h-v",onSubmit:function(e){e.preventDefault(),i(u,_).then(function(e){e?t(e,_,u):b(!0)})}},a.a.createElement(ve.a.Group,{className:"width-100",size:"lg",controlId:"participantId"},a.a.createElement(ve.a.Label,null,"Participant ID"),a.a.createElement(ve.a.Control,{autoFocus:!0,type:"participantId",value:u,onChange:function(e){return l(e.target.value)}})),a.a.createElement(ve.a.Group,{className:"width-100",size:"lg",controlId:"studyId"},a.a.createElement(ve.a.Label,null,"Study ID"),a.a.createElement(ve.a.Control,{type:"studyId",value:_,onChange:function(e){return h(e.target.value)}})),a.a.createElement(Ee.a,{style:{width:"100%"},block:!0,size:"lg",type:"submit",disabled:!(u.length>0&&_.length>0)},"Log In"))))},ge=n(37);var Oe=function(){var e=Object(r.useState)(!1),t=Object(d.a)(e,2),n=t[0],o=t[1],i=Object(r.useState)(!1),c=Object(d.a)(i,2),f=c[0],h=c[1],m=Object(r.useState)(!1),E=Object(d.a)(m,2),b=E[0],g=E[1],O=Object(r.useState)(""),y=Object(d.a)(O,2),j=y[0],A=y[1],T=Object(r.useState)(""),U=Object(d.a)(T,2),I=U[0],R=U[1],S=Object(r.useState)(""),C=Object(d.a)(S,2),x=C[0],D=C[1],N=Object(r.useState)(""),B=Object(d.a)(N,2),L=B[0],M=B[1],H=Object(r.useState)("default"),F=Object(d.a)(H,2),V=F[0],G=F[1],q=Object(r.useState)(!1),z=Object(d.a)(q,2),Y=z[0],K=z[1],J=(new Date).toISOString(),W=new URLSearchParams(window.location.search),X=function(){var e=Object(u.a)(s.a.mark(function e(){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),Q=function(){},Z=Object(r.useCallback)(function(e,t,n){e&&l.jsPsych.data.addProperties({participant_id:n,study_id:t,start_date:J,task_version:ge.a}),A(n),R(t),o(e)},[J]);return Object(r.useEffect)(function(){if(console.log("Environment configuration:",w.c),w.c.USE_ELECTRON){var e=window.require("electron").ipcRenderer;h(e),e.send("updateEnvironmentVariables",w.c);var t=e.sendSync("syncCredentials");t.envParticipantId&&D(t.envParticipantId),t.envStudyId&&M(t.envStudyId),G("desktop")}else if(w.c.USE_MTURK){window.lodash=_.noConflict();var n=v();g(new PsiTurk(n,"/complete")),G("mturk"),Z(!0,"mturk",n)}else if(w.c.USE_FIREBASE){G("firebase");var r=W.get("participantID"),a=W.get("studyID");r&&D(r),a&&M(a)}else K(!0)},[]),Y?a.a.createElement("div",{className:"centered-h-v"},a.a.createElement("div",{className:"width-50 alert alert-danger"},"Please tell your task provider to enable Firebase.")):a.a.createElement(a.a.Fragment,null,n?a.a.createElement(me,{dataUpdateFunction:{desktop:function(e){f.send("data",e)},firebase:function(e){k(e)},mturk:function(e){b.recordTrialData(e)},default:Q}[V],dataFinishFunction:{desktop:function(){f.send("end","true")},mturk:function(){!function(){var e=Object(u.a)(s.a.mark(function e(){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return b.saveData(),e.next=3,p(5e3);case 3:b.completeHIT();case 4:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()()},firebase:Q,default:Q}[V],participantID:j,studyID:I}):a.a.createElement(be,{validationFunction:{desktop:X,default:X,firebase:function(e,t){return P(e,t,J)}}[V],envParticipantId:x,envStudyId:L,onLogin:Z}))};i.a.render(a.a.createElement(Oe,null),document.getElementById("root"))}],[[39,1,2]]]);
//# sourceMappingURL=main.b58c8610.chunk.js.map