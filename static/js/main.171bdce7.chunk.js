(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,function(e,t,n){"use strict";n.d(t,"d",function(){return S}),n.d(t,"f",function(){return h}),n.d(t,"h",function(){return _}),n.d(t,"j",function(){return y}),n.d(t,"c",function(){return j}),n.d(t,"g",function(){return P}),n.d(t,"i",function(){return T}),n.d(t,"b",function(){return k}),n.d(t,"a",function(){return v}),n.d(t,"k",function(){return A});var r=n(13),o=n(21),a=n.n(o),i=n(30);n.d(t,"e",function(){return i.eventCodes});var c=!r.jsPsych.turk.turkInfo().outsideTurk,s="true"===Object({NODE_ENV:"production",PUBLIC_URL:".",REACT_APP_USE_PHOTODIODE:"true",REACT_APP_USE_EEG:"false",REACT_APP_VOLUME:"true"}).REACT_APP_VIDEO,u="true"===Object({NODE_ENV:"production",PUBLIC_URL:".",REACT_APP_USE_PHOTODIODE:"true",REACT_APP_USE_EEG:"false",REACT_APP_VOLUME:"true"}).REACT_APP_FIREBASE,d=!0;try{window.require("electron")}catch(U){d=!1}var p="true"===Object({NODE_ENV:"production",PUBLIC_URL:".",REACT_APP_USE_PHOTODIODE:"true",REACT_APP_USE_EEG:"false",REACT_APP_VOLUME:"true"}).REACT_APP_HIDE_FRAME_ELECTRON&&d,l=d,f=Object({NODE_ENV:"production",PUBLIC_URL:".",REACT_APP_USE_PHOTODIODE:"true",REACT_APP_USE_EEG:"false",REACT_APP_VOLUME:"true"}).REACT_APP_BREATHING_AUDIO||"breathing_exercise",h={width:600,height:600},_=10,m=function(e){return e.keys().map(e)},v={frequency:100*(i.eventCodes.open_provoc_task-9),type:"sine"},E=m(n(50)),g=m(n(55)),b=m(n(60)),O=m(n(62)),k=a.a.filter(O,function(e){return e.includes(f)})[0];console.log(k);var y={min:-3,max:3,canvasSize:640,circleRadius:28,cursorRadius:7.5},P=n(66);if(c){var w=n(67);a.a.merge(P,w)}var j={num_repeats:2,images:{neutral:E,provoking:g},repeats_per_condition:3,is_practice:!1},T={images:{neutral:b,provoking:[]},repeats_per_condition:1,is_practice:!0},A="Provocation",S={USE_MTURK:c,USE_VIDEO:s,USE_ELECTRON:d,USE_FIREBASE:u,USE_EEG:!1,HIDE_FRAME_ELECTRON:p,USE_PHOTODIODE:l,USE_VOLUME:!0}},,,,,,function(e,t,n){"use strict";n.d(t,"b",function(){return s}),n.d(t,"a",function(){return u});var r=n(2),o=n(14),a=n.n(o),i=!1;if(r.d.USE_ELECTRON){var c=window.require("electron");i=c.ipcRenderer}var s=function(){var e=r.d.USE_PHOTODIODE?"visible":"invisible";return'<div class="photodiode-box '.concat(e,'" id="photodiode-box">\n\t\t\t\t\t\t\t\t\t<span id="photodiode-spot" class="photodiode-spot"></span>\n  \t\t\t\t\t\t\t\t</div>')},u=function(e){if(r.d.USE_PHOTODIODE){var t=e;e<r.e.open_provoc_task&&(t=1),function e(t,n){n>0&&function(e,t){a()(".photodiode-spot").css({"background-color":"white"}),setTimeout(function(){a()(".photodiode-spot").css({"background-color":"black"}),t()},e)}(t,function(){setTimeout(function(){e(t,n-1)},t)})}(40,t),i&&(i.send("trigger",e),setTimeout(function(){i.send("trigger",0)},5))}}},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return"<div class=".concat(t?"main-prompt":"task-container",">").concat(e,"</div>")}},,,,,,,,,,,,,,,,,,,,,function(e,t){e.exports={eventCodes:{open_provoc_task:13,fixation:1,evidence:5,show_ratings:7,rate:2,start_break:8,test_connect:32}}},,,,,function(e,t,n){"use strict";(function(e){var r=n(10),o=n.n(r),a=n(36),i=n(16),c=n(2),s=n(8),u=n(9),d=n(13),p=!1;if(c.d.USE_ELECTRON){var l=window.require("electron");p=l.ipcRenderer}t.a=function(){document.title=c.k;var t='\n  <div class="d-flex flex-column align-items-center">\n  <p>'.concat(c.g.instructions.camera,'</p>\n  <video id="camera" width="640" height="480" autoplay></video>\n  </div>\n  ');return{type:"html_button_response",stimulus:Object(u.a)(t,!1)+Object(s.b)(),choices:[c.g.prompt.continue.button],response_ends_trial:!0,on_load:function(){var t=d.jsPsych.data.get().values()[0].participant_id,n=document.getElementById("camera"),r=function(r,o){console.log(r),"cameraCapture"===o&&(n.srcObject=r);var a=[];window[o]=new MediaRecorder(r,{mimeType:"video/webm"}),window[o].addEventListener("dataavailable",function(e){e.data.size>0&&a.push(e.data)}),window[o].addEventListener("stop",function(){!function(t,n,r){var o=new FileReader,a="pid_".concat(r,"_").concat(n,"_").concat(Date.now(),".webm");o.onload=function(){if(2===o.readyState){var t=new e(o.result);p.send("save_video",a,t)}},o.readAsArrayBuffer(t)}(new Blob(a),o,t)})};navigator.mediaDevices.getUserMedia({video:!0}).then(function(e){return r(e,"cameraCapture")}),window.require("electron").desktopCapturer.getSources({types:["window"]}).then(function(){var e=Object(i.a)(o.a.mark(function e(t){var n,i,s;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=Object(a.a)(t);try{for(n.s();!(i=n.n()).done;)(s=i.value).name===c.k&&navigator.mediaDevices.getUserMedia({video:{mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:s.id}}}).then(function(e){r(e,"screenCapture")}).catch(function(e){return console.log(e)})}catch(o){n.e(o)}finally{n.f()}case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}())},on_finish:function(){c.d.USE_ELECTRON&&(window.cameraCapture.start(),window.screenCapture.start())}}}}).call(this,n(68).Buffer)},,function(e){e.exports={a:"7.7.7"}},,function(e,t,n){e.exports=n(75)},,,,,function(e,t,n){},,function(e,t,n){},,,,function(e,t,n){var r={"./1_happy.jpg":51,"./2_happy.jpg":52,"./3_happy.jpg":53,"./4_happy.jpg":54};function o(e){var t=a(e);return n(t)}function a(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}o.keys=function(){return Object.keys(r)},o.resolve=a,e.exports=o,o.id=50},function(e,t,n){e.exports=n.p+"static/media/1_happy.18aba42e.jpg"},function(e,t,n){e.exports=n.p+"static/media/2_happy.9545f071.jpg"},function(e,t,n){e.exports=n.p+"static/media/3_happy.c893ae7f.jpg"},function(e,t,n){e.exports=n.p+"static/media/4_happy.d5ab89eb.jpg"},function(e,t,n){var r={"./4_sad.jpeg":56,"./5_sad.jpeg":57,"./6_sad.jpeg":58,"./7_unknown.jpeg":59};function o(e){var t=a(e);return n(t)}function a(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}o.keys=function(){return Object.keys(r)},o.resolve=a,e.exports=o,o.id=55},function(e,t,n){e.exports=n.p+"static/media/4_sad.104fb27c.jpeg"},function(e,t,n){e.exports=n.p+"static/media/5_sad.ef6dac84.jpeg"},function(e,t,n){e.exports=n.p+"static/media/6_sad.bb879b1e.jpeg"},function(e,t,n){e.exports=n.p+"static/media/7_unknown.c348d28c.jpeg"},function(e,t,n){var r={"./istockphoto-888845986-612x612.jpg":61};function o(e){var t=a(e);return n(t)}function a(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}o.keys=function(){return Object.keys(r)},o.resolve=a,e.exports=o,o.id=60},function(e,t,n){e.exports=n.p+"static/media/istockphoto-888845986-612x612.23164b56.jpg"},function(e,t,n){var r={"./Guided Breathing.m4a":63,"./PlaceHolderBreathingForButler.m4a":64,"./breathing_exercise.m4a":65};function o(e){var t=a(e);return n(t)}function a(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}o.keys=function(){return Object.keys(r)},o.resolve=a,e.exports=o,o.id=62},function(e,t,n){e.exports=n.p+"static/media/Guided Breathing.ad20697d.m4a"},function(e,t,n){e.exports=n.p+"static/media/PlaceHolderBreathingForButler.baf2b4f7.m4a"},function(e,t,n){e.exports=n.p+"static/media/breathing_exercise.b4b71d9b.m4a"},function(e){e.exports={task:{name:"Picture Rating Task",end:"This experiment has ended."},prompt:{skip:"Skip breathing exercise",continue:{press:"Press any key to continue.",button:"Continue"},focus:"Make sure the photodiode is aligned and the EEG recording has begun before continuing.",setting_up:"Setting up task, please wait..."},eventMarker:{found:"Hold the USB event marker in front of the camera.",not_found:"Note: no USB event marker found."},instructions:{welcome:"Welcome, new user!",p1:"During the task, you will see a series of images which are a set of photographs that have been used by scientists around the world for over 20 years.",p2:"You will be asked to rate how much you like or dislike the image. Please rate each image on a scale from -3 (Dislike Very Much) to +3 (Like Very Much). Zero (0) is neutral... meaning you have no feelings either way. It is important you rate each picture based on your initial emotional response. There are no right or wrong answers... just respond with your feelings, and rate the pictures very quickly.",fixation:"Throughout the experiment, you'll see this fixation point at the center of the screen. <br> Try to keep your eyes focused on the fixation point during the task.",rate:"Next, you will do one practice trial. You will see the fixation point, followed by an image. Then, you will be asked to submit your rating when you\u2019re ready.",rate_practice:"Try submitting a rating of \u201c0\u201d by dragging the cursor to \u201c0\u201d and clicking to submit.",no_talking:"Try not to talk or move around more than necessary, as movements affect the quality of the recordings.",instruction_end:"In a few moments, the task will begin.",block_end:"Block 1 of 2 is now complete.",block_break:"Take a 10 second break and continue to block 2 of 2.",adjust_volume:"Set tablet volume to 50/100.",camera:"Make sure the camera is pointing to you and your face is within the camera area.",breathing:"Halfway through the task, you will be guided through a 3 minute guided deep breathing exercise."},block:{end_p1:"Block ",end_p2:" of ",end_p3:" is now complete.",break_p1:"You will now do a 3 minute guided breathing exercise before continuing to block ",break_p2:" of ",break_p3:"."},countdown:{message:"Picture rating will begin in:"}}},function(e){e.exports={}},,,,,,,,function(e,t,n){"use strict";n.r(t);var r=n(1),o=n.n(r),a=n(34),i=n.n(a),c=(n(44),n(10)),s=n.n(c),u=n(16),d=n(15),p=n(13),l=(n(46),n(47),n(48),function(e){return new Promise(function(t){return setTimeout(t,e)})}),f=function(e){return function(e,t){return e+Math.floor(Math.random()*Math.floor(t))}(e,50)},h=function(e){return JSON.parse(JSON.stringify(e))},m=function(e){for(var t,n,r=e.length;0!==r;)n=Math.floor(Math.random()*r),t=e[r-=1],e[r]=e[n],e[n]=t;return e},v=function(){var e=p.jsPsych.turk.turkInfo();return"".concat(e.workerId,":").concat(e.assignmentId)},E=n(22),g=(n(76),n(77),{apiKey:Object({NODE_ENV:"production",PUBLIC_URL:".",REACT_APP_USE_PHOTODIODE:"true",REACT_APP_USE_EEG:"false",REACT_APP_VOLUME:"true"}).REACT_APP_apiKey,authDomain:Object({NODE_ENV:"production",PUBLIC_URL:".",REACT_APP_USE_PHOTODIODE:"true",REACT_APP_USE_EEG:"false",REACT_APP_VOLUME:"true"}).REACT_APP_authDomain,projectId:Object({NODE_ENV:"production",PUBLIC_URL:".",REACT_APP_USE_PHOTODIODE:"true",REACT_APP_USE_EEG:"false",REACT_APP_VOLUME:"true"}).REACT_APP_projectId||"no-firebase",storageBucket:Object({NODE_ENV:"production",PUBLIC_URL:".",REACT_APP_USE_PHOTODIODE:"true",REACT_APP_USE_EEG:"false",REACT_APP_VOLUME:"true"}).REACT_APP_storageBucket,messagingSenderId:Object({NODE_ENV:"production",PUBLIC_URL:".",REACT_APP_USE_PHOTODIODE:"true",REACT_APP_USE_EEG:"false",REACT_APP_VOLUME:"true"}).REACT_APP_messagingSenderId,appId:Object({NODE_ENV:"production",PUBLIC_URL:".",REACT_APP_USE_PHOTODIODE:"true",REACT_APP_USE_EEG:"false",REACT_APP_VOLUME:"true"}).REACT_APP_appId});E.a.initializeApp(g);var b=E.a.firestore();"localhost"===window.location.hostname&&b.useEmulator("localhost",8080);var O=function(){var e=Object(u.a)(s.a.mark(function e(t,n,r){var o,a,i,c,d;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o="".concat(n,"/").concat(t,"/").concat(r),a=E.a.storage(),i=a.ref(o),e.next=5,i.listAll();case 5:return c=e.sent,d=c.items.map(function(){var e=Object(u.a)(s.a.mark(function e(t){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getDownloadURL();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),e.next=9,Promise.all(d);case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}},e)}));return function(t,n,r){return e.apply(this,arguments)}}(),k=function(e,t,n){return b.collection("participant_responses").doc(t).collection("participants").doc(e).collection("data").doc(n).set({start_time:n,app_version:window.navigator.appVersion,app_platform:window.navigator.platform,results:[]}).then(function(){return!0}).catch(function(){return!1})},y=function(e){var t=e.participant_id,n=e.study_id,r=e.start_date;b.collection("participant_responses").doc(n).collection("participants").doc(t).collection("data").doc(r).update("results",E.a.firestore.FieldValue.arrayUnion(e)).then(function(){return!0}).catch(function(e){return console.error("Error adding to Firebase:",e),!1})},P=E.a.firestore,w=(P.TimeStamp,P.GeoPoint,E.a,n(2)),j=n(25),T=n(8),A=function(e){return e?'<div class="task-container"><div id="fixation-dot" class="color-green"> </div></div>':'<div class="task-container"><div id="fixation-dot" class="color-white"> </div></div>'},S=n(14),U=n.n(S),x=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=A(n)+Object(T.b)(),a=w.e.fixation,i=t?f(e):e;return{type:"html_keyboard_response",choices:p.jsPsych.NO_KEYS,stimulus:o,response_ends_trial:!1,trial_duration:i,on_load:function(){Object(T.a)(a),r&&U()("html").css("cursor","none")},on_finish:function(e){e.code=a,r&&U()("html").css("cursor","auto")}}},C=function(e,t){var n=w.e.evidence;return{type:"image_keyboard_response",stimulus:e,prompt:Object(T.b)(),response_ends_trial:!1,trial_duration:f(t),on_load:function(){U()("#jspsych-image-keyboard-response-stimulus").addClass("image"),U()("#jspsych-image-keyboard-response-stimulus").height(w.f.height),U()("#jspsych-image-keyboard-response-stimulus").width(w.f.width),U()("html").css("cursor","none"),Object(T.a)(n)},on_finish:function(e){e.code=n,U()("html").css("cursor","auto")}}},L=n(21),R=n.n(L),I=function(e,t,n,r,o){var a=e-r,i=t-o;return Math.sqrt(a*a+i*i)<n},D=function(e,t,n,r,o){for(var a=0;a<r.length;a++){var i=r[a];if(I(i.x,i.y,o,e,t))return i}return null},N=w.j.canvasSize,M=w.j.circleRadius,B=w.j.cursorRadius,V='<canvas width="'.concat(N,'" height="').concat(N,'" id="jspsych-canvas">\n    Your browser does not support HTML5 canvas\n  </canvas>'),q=function(){var e='<div class="task-container">'+V+Object(T.b)()+"</div>";return{type:"call_function",async:!0,func:function(t){var n=w.e.show_ratings,r=w.e.rate,o=Date.now(),a=document.querySelector("#jspsych-content");a.innerHTML=e;var i,c=document.querySelector("#jspsych-canvas"),s=c.getContext("2d"),u=document.pointerLockElement===a||document.mozPointerLockElement===a,d=U()("#jspsych-canvas").width()/2,p=0,l=U()("#jspsych-canvas").height()/2,f=0,h=[],_=function(){return Date.now()-o},m=function(){return h.push({x:d,y:l,elapsed:_()})};m();var v=function(e,t,n){var r=n/2,o=.85*r,a=t-e+1,i=Math.PI/(a-1);return R.a.range(e,t+1).map(function(e){var t=i*e-Math.PI/2;return{n:e,x:o*Math.sin(t)+r,y:o*Math.cos(t)+r}})}(w.j.min,w.j.max,N),E=function(){s.clearRect(0,0,c.width,c.height),function(e,t,n,r){t<1e4&&r||(e.font="20px arial",e.textBaseline="middle",e.textAlign="center",e.fillStyle="#ffffff",r?e.fillText("Please select a rating",n/2,.25*n):e.fillText("Click the dot",n/2,.25*n))}(s,_(),N,u),function(e,t,n,r,o,a){e.font=.8*n+"px arial",e.textBaseline="middle",e.textAlign="center";var i=D(r,o,0,t,n);t.forEach(function(t){e.fillStyle=t===i?"#778899":"#D3D3D3",e.beginPath(),e.arc(t.x,t.y,n,0,2*Math.PI,!0),e.fill(),e.fillStyle="#000000",e.fillText(t.n.toString(),t.x,t.y+3.5)})}(s,v,M,d,l),function(e,t){e.fillStyle="#ffffff",e.beginPath(),e.arc(t/2,t/2,7.5,0,2*Math.PI,!0),e.fill()}(s,N),function(e,t,n,r){e.beginPath(),e.moveTo(t,n-r),e.lineTo(t,n+r),e.moveTo(t-r,n),e.lineTo(t+r,n),e.lineWidth=3,e.strokeStyle="#a6a6a6",e.stroke()}(s,d,l,B)};a.requestPointerLock=a.requestPointerLock||a.mozRequestPointerLock;var g=function(e){document.pointerLockElement!==a&&document.mozPointerLockElement!==a||(u=!0,i||(i=requestAnimationFrame(function(){i=null,E()})))},b=function(e){u=!1,i||(i=requestAnimationFrame(function(){i=null,E()}))};document.addEventListener("pointerlockerror",b,!1),document.addEventListener("pointerlockchange",g,!1),document.addEventListener("mozpointerlockchange",g,!1),c.onclick=function(){return!u&&a.requestPointerLock()};var O=function(e){d+=e.movementX,l+=e.movementY;var t=Math.sign(e.movementX),n=Math.sign(e.movementY),r=!1;t!==p&&0!==t&&(m(),p=t,r=!0),n!==f&&0!==n&&(r||m(),f=n),d>c.width-B&&(d=c.width-B),l>c.height-B&&(l=c.height-B),d<B&&(d=B),l<B&&(l=B),i||(i=requestAnimationFrame(function(){i=null,E()}))};a.addEventListener("mousemove",O,!1),a.addEventListener("click",function e(){var o=D(d,l,0,v,M);if(o){var i=_();Object(T.a)(r),m(),a.removeEventListener("mousemove",O,!1),a.removeEventListener("click",e,!1),setTimeout(function(){document.removeEventListener("pointerlockerror",b,!1),document.removeEventListener("pointerlockchange",g,!1),document.removeEventListener("mozpointerlockchange",g,!1),t({circle:o,click:{x:d,y:l},code:[n,r],rt:i,path:h})},500)}},!1),E(),Object(T.a)(n),setTimeout(E,1e4)}}},F=function(e){return{type:"html_keyboard_response",timeline:[x(2e3,!0,!1,!0),x(200,!1,!0,!0),C(e,3e3),q()]}},H=function(e){return{type:"html_keyboard_response",timeline:function(e){for(var t=[],n=0;n<e.repeats_per_condition;n++){for(var r=m(h(e.images.neutral)),o=m(h(e.images.provoking));r.length>0&&o.length>0;)r.length-o.length>=3?t.push(r.pop()):o.length-r.length>=3?t.push(o.pop()):Math.random()>.5?t.push(r.pop()):t.push(o.pop());t.push.apply(t,Object(j.a)(r)),t.push.apply(t,Object(j.a)(o))}return t}(e).map(function(e){return F(e)})}},G=n(9),z=function(){return{type:"html_button_response",stimulus:Object(G.a)("<div><h1>".concat(w.g.task.name,"</h1></div>"),!0)+Object(T.b)(),prompt:"",choices:[w.g.prompt.continue.button]}},Y=function(){return{type:"html_button_response",stimulus:Object(G.a)("<div>\n    <h2 id='usb-alert'></h2>\n    <br><p>".concat(w.g.prompt.focus,"</p>\n    </div>"),!0)+Object(T.b)(),choices:[w.g.prompt.continue.button]}},K=Object(G.a)("\n    <div class='instructions'>\n    <h1>".concat(w.g.instructions.welcome,"</h1>\n    <p>").concat(w.g.instructions.p1,"</p>\n    <p>").concat(w.g.instructions.p2,"</p>\n    </div>\n    "),!0),J=Object(G.a)("\n    <div class='instructions'>\n    <p>".concat(w.g.instructions.fixation,'</p>\n    <div id="fixation-dot" class="color-white"></div>\n    </div>\n    '),!0),W=Object(G.a)("\n    <div class='instructions'>\n    <p>".concat(w.g.instructions.rate,"</p>\n    </div>\n    "),!0),X=Object(G.a)("\n    <div class='instructions'>\n    <p>".concat(w.g.instructions.rate_practice,"</p>\n    </div>\n    "),!0),Z=Object(G.a)("\n    <div class='instructions'>\n    <p>".concat(w.g.instructions.no_talking,"</p>\n    </div>\n    "),!0),Q=Object(G.a)("\n    <div class='instructions'>\n    <p>".concat(w.g.instructions.instruction_end,"</p>\n    </div>\n    "),!0),$={type:"instructions",show_clickable_nav:!0,pages:[K,Object(G.a)("\n  <div class='instructions'>\n  <p>".concat(w.g.instructions.breathing,"</p>\n  </div>\n  "),!0),J,W,X]},ee={type:"instructions",show_clickable_nav:!0,pages:[Z,Q]},te=function(){return{type:"html_button_response",stimulus:Object(G.a)("\n    <div class='instructions'>\n    <h1>".concat(w.g.instructions.adjust_volume,"</h1>\n    </div>\n    "),!0),choices:[w.g.prompt.continue.button],response_ends_trial:!0}},ne=n(35),re=function(e,t){var n=L.range(t,0,-1).map(function(e){return{prompt:"<h1>".concat(e,"</h1>")}});return{type:"html_keyboard_response",stimulus:Object(G.a)("<h3>".concat(e,"</h3>"),!0),trial_duration:1e3,response_ends_trial:!1,timeline:n}},oe=function(e,t){var n=w.e.start_break,r=Object(G.a)("\n    <div class='instructions'>\n  <h1>".concat(w.g.block.end_p1,"\n    ").concat(e,"\n    ").concat(w.g.block.end_p2,"\n    ").concat(t,"\n    ").concat(w.g.block.end_p3,"</h1>\n  <h2>").concat(w.g.block.break_p1,"\n    ").concat(e+1,"\n    ").concat(w.g.block.break_p2,"\n    ").concat(t,"\n    ").concat(w.g.block.break_p3,"</h2>\n  </div>"),!0)+Object(T.b)();return{type:"audio_keyboard_response",stimulus:w.b,prompt:r,choices:[],response_ends_trial:!1,trial_ends_after_audio:!0,on_load:function(){Object(T.a)(n)},on_finish:function(e){e.code=n}}},ae=function(e){return{type:"html_keyboard_response",stimulus:Object(G.a)("<h1>".concat(w.g.task.end,"</h1>"),!0)+Object(T.b)(),trial_duration:e,on_load:function(){w.d.USE_VIDEO&&(console.log("finished"),window.cameraCapture.stop(),window.screenCapture.stop())}}},ie=function(){var e='<div class="task-container"><h1>Click the dot</h1>'+A(!1)+Object(T.b)()+"</div>";return{type:"call_function",async:!0,func:function(t){var n=document.querySelector("#jspsych-content");n.innerHTML=e,n.requestPointerLock=n.requestPointerLock||n.mozRequestPointerLock,n.addEventListener("click",function(){n.requestPointerLock(),n.innerHTML="",setTimeout(function(){t({lock_request:!0})},500)},{once:!0})}}},ce=function(){return{type:"call_function",async:!0,func:function(e){document.exitPointerLock=document.exitPointerLock||document.mozExitPointerLock,document.exitPointerLock(),e({lock_release:!0})}}},se=function(){return{type:"html_keyboard_response",stimulus:Object(G.a)("<h1>".concat(w.g.prompt.setting_up,"</h1>"),!0)+Object(T.b)(),trial_duration:2e3,on_load:function(){Object(T.a)(w.e.open_provoc_task),function(e){var t=new AudioContext,n=t.createOscillator(),r=t.createGain();n.type=e.type,n.connect(r),n.frequency.setValueAtTime(e.frequency,0),r.connect(t.destination),n.start(),n.stop(t.currentTime+.4)}(w.a)}}},ue=n(27),de=n.n(ue),pe=!1,le=!1,fe=!1,he=function(){var e=Object(u.a)(s.a.mark(function e(t,n){var r;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r={neutral:[],provoking:[]},e.next=3,O(t,n,"neutral");case 3:return r.neutral=e.sent,e.next=6,O(t,n,"provoking");case 6:return r.provoking=e.sent,e.abrupt("return",r);case 8:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}(),_e=function(e){var t=e.neutral.length,n=e.provoking.length;if(t!==w.h||n!==w.h){var r="Number of images provided does not meet requirement.  Found ".concat(t," neutral images and ").concat(n," provoking images, the settings for this task requires ").concat(w.h," of each type.");w.d.USE_ELECTRON?fe.send("error",r):alert(r)}},me=function(e,t){var n=de.a.join(pe.getPath("desktop"),"provocation-images","".concat(e)),r=de.a.join(n,t);return le.readdirSync(r).map(function(e){return"file://"+de.a.join(r,e)})},ve=function(){var e=Object(u.a)(s.a.mark(function e(t,n){var r,o,a;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!w.d.USE_ELECTRON){e.next=19;break}return pe=window.require("electron").remote.app,le=window.require("fs"),r=window.require("electron"),fe=r.ipcRenderer,e.prev=5,(o={}).neutral=me(t,"neutral"),o.provoking=me(t,"provoking"),_e(o),e.abrupt("return",o);case 13:e.prev=13,e.t0=e.catch(5),console.warn("Error loading local files - using default images"),fe.send("error","Could not load images from local device. - ".concat(e.t0));case 17:e.next=28;break;case 19:if(!w.d.USE_FIREBASE){e.next=27;break}return e.next=22,he(t,n);case 22:return a=e.sent,_e(a),e.abrupt("return",a);case 27:return e.abrupt("return",!1);case 28:case"end":return e.stop()}},e,null,[[5,13]])}));return function(t,n){return e.apply(this,arguments)}}(),Ee=function(){var e=Object(u.a)(s.a.mark(function e(t,n,r){var o,a,i;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ve(t,n);case 2:for((o=e.sent)?(r.images.neutral=o.neutral,r.images.provoking=o.provoking):r.images=w.c.images,a=[],i=1;i<=r.num_repeats;i++)a.push(re(w.g.countdown.message,3),H(r)),i<r.num_repeats&&a.push(oe(i,r.num_repeats));return e.abrupt("return",a);case 7:case"end":return e.stop()}},e)}));return function(t,n,r){return e.apply(this,arguments)}}(),ge=function(){var e=Object(u.a)(s.a.mark(function e(t,n){var r,o,a,i;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=[z()],w.d.USE_VOLUME&&r.push(te()),w.d.USE_VIDEO&&r.push(Object(ne.a)()),w.d.USE_EEG&&(r.push(Y()),r.push(se())),r.push($,ie(),H(w.i),ce(),ee),e.next=7,Ee(t,n,w.c);case 7:return o=e.sent,r.push(ie()),r.push.apply(r,Object(j.a)(o)),r.push(ce()),r.push(ae(5e3)),a=r,i=[],e.abrupt("return",w.d.USE_MTURK?i:a);case 15:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}();var be=function(e){var t=e.dataUpdateFunction,n=e.dataFinishFunction,a=e.participantID,i=e.studyID,c=Object(r.useState)([]),s=Object(d.a)(c,2),u=s[0],l=s[1];return Object(r.useEffect)(function(){ge(a,i).then(function(e){return l(e)})},[a,i]),0===u.length?o.a.createElement("div",{className:"App height-100"},o.a.createElement("div",{className:"centered-h-v"},"Loading task")):o.a.createElement("div",{className:"App"},o.a.createElement(p.Experiment,{settings:{timeline:u,preload_audio:[w.b],on_data_update:function(e){return t(e)},on_finish:function(e){return n(e)}}}))},Oe=n(20),ke=n(38);var ye=function(e){var t=e.onLogin,n=e.envParticipantId,a=e.envStudyId,i=e.validationFunction,c=Object(r.useState)(""),s=Object(d.a)(c,2),u=s[0],p=s[1],l=Object(r.useState)(""),f=Object(d.a)(l,2),h=f[0],_=f[1],m=Object(r.useState)(!1),v=Object(d.a)(m,2),E=v[0],g=v[1];return Object(r.useEffect)(function(){p(n),_(a)},[n,a]),o.a.createElement("div",{className:"centered-h-v"},o.a.createElement("div",{className:"width-50 max-width-600px"},E?o.a.createElement("div",{className:"alert alert-danger",role:"alert"},"The participant ID and study ID do not match"):null,o.a.createElement(Oe.a,{className:"centered-h-v",onSubmit:function(e){e.preventDefault(),i(u,h).then(function(e){e?t(e,h,u):g(!0)})}},o.a.createElement(Oe.a.Group,{className:"width-100",size:"lg",controlId:"participantId"},o.a.createElement(Oe.a.Label,null,"Participant ID"),o.a.createElement(Oe.a.Control,{autoFocus:!0,type:"participantId",value:u,onChange:function(e){return p(e.target.value)}})),o.a.createElement(Oe.a.Group,{className:"width-100",size:"lg",controlId:"studyId"},o.a.createElement(Oe.a.Label,null,"Study ID"),o.a.createElement(Oe.a.Control,{type:"studyId",value:h,onChange:function(e){return _(e.target.value)}})),o.a.createElement(ke.a,{style:{width:"100%"},block:!0,size:"lg",type:"submit",disabled:!(u.length>0&&h.length>0)},"Log In"))))},Pe=n(37);var we=function(){var e=Object(r.useState)(!1),t=Object(d.a)(e,2),n=t[0],a=t[1],i=Object(r.useState)(!1),c=Object(d.a)(i,2),f=c[0],h=c[1],m=Object(r.useState)(!1),E=Object(d.a)(m,2),g=E[0],b=E[1],O=Object(r.useState)(""),P=Object(d.a)(O,2),j=P[0],T=P[1],A=Object(r.useState)(""),S=Object(d.a)(A,2),U=S[0],x=S[1],C=Object(r.useState)(""),L=Object(d.a)(C,2),R=L[0],I=L[1],D=Object(r.useState)(""),N=Object(d.a)(D,2),M=N[0],B=N[1],V=Object(r.useState)("default"),q=Object(d.a)(V,2),F=q[0],H=q[1],G=(new Date).toISOString(),z=new URLSearchParams(window.location.search),Y=function(){var e=Object(u.a)(s.a.mark(function e(){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),K=function(){},J=Object(r.useCallback)(function(e,t,n){e&&p.jsPsych.data.addProperties({participant_id:n,study_id:t,start_date:G,timestamp:Date.now(),task_version:Pe.a}),T(n),x(t),a(e)},[G]);return Object(r.useEffect)(function(){if(console.log("Environment configuration:",w.d),w.d.USE_ELECTRON){var e=window.require("electron").ipcRenderer;h(e),e.send("updateEnvironmentVariables",w.d);var t=e.sendSync("syncCredentials");t.envParticipantId&&I(t.envParticipantId),t.envStudyId&&B(t.envStudyId),H("desktop")}else if(w.d.USE_MTURK){window.lodash=_.noConflict();var n=v();b(new PsiTurk(n,"/complete")),H("mturk"),J(!0,"mturk",n)}else if(w.d.USE_FIREBASE){H("firebase");var r=z.get("participantID"),o=z.get("studyID");r&&I(r),o&&B(o)}},[]),o.a.createElement(o.a.Fragment,null,n?o.a.createElement(be,{dataUpdateFunction:{desktop:function(e){f.send("data",e)},firebase:function(e){y(e)},mturk:function(e){g.recordTrialData(e)},default:K}[F],dataFinishFunction:{desktop:function(){f.send("end","true")},mturk:function(){!function(){var e=Object(u.a)(s.a.mark(function e(){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return g.saveData(),e.next=3,l(5e3);case 3:g.completeHIT();case 4:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()()},firebase:K,default:function(){p.jsPsych.data.get().localSave("csv","neuro-task.csv")}}[F],participantID:j,studyID:U}):o.a.createElement(ye,{validationFunction:{desktop:Y,default:Y,firebase:function(e,t){return k(e,t,G)}}[F],envParticipantId:R,envStudyId:M,onLogin:J}))};i.a.render(o.a.createElement(we,null),document.getElementById("root"))}],[[39,1,2]]]);
//# sourceMappingURL=main.171bdce7.chunk.js.map